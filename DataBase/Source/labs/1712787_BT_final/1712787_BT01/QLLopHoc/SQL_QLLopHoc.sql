USE master
GO
--b1: toa csdl
IF DB_ID('QLLopHoc') IS NOT NULL
DROP DATABASE QLLopHoc
GO

CREATE DATABASE QLLopHoc
GO

USE QLLopHoc
GO

CREATE TABLE HOCSINH
(
MaHs CHAR(10) PRIMARY KEY,
HoTen NVARCHAR(40),
GioiTinh NCHAR(3),
NgaySinh date,
DiaChi NVARCHAR(100),
MaLop CHAR(10),

)
GO

CREATE TABLE LOPHOC
(
MaLop CHAR(10) PRIMARY KEY,
TenLop NVARCHAR(40),
Nam CHAR(4),
GVCN CHAR(10),
LopTruong CHAR(10),

)
GO

CREATE TABLE GIAOVIEN
(
MaGV CHAR(10) PRIMARY KEY,
HoTen NVARCHAR(40),
GioiTinh NCHAR(3),
NgaySinh date,
DiaChi NVARCHAR(100),

)
GO

-------------------
ALTER TABLE HOCSINH ADD
CONSTRAINT FK_HOCSINH_LOPHOC
FOREIGN KEY(MaLop)
REFERENCES LOPHOC(MaLop)

ALTER TABLE LOPHOC ADD
CONSTRAINT FK_LOPHOC_HOCSINH
FOREIGN KEY(LopTruong)
REFERENCES HOCSINH(MaHs),
CONSTRAINT FK_LOPHOC_GIAOVIEN
FOREIGN KEY(GVCN)
REFERENCES GIAOVIEN(MaGV)

----------------------------
INSERT INTO GIAOVIEN (MaGV,HoTen,GioiTinh,NgaySinh,DiaChi) VALUES ('GV01',N'Trần Bạch Tuyết',N'Nữ','05/20/1980',N'127 Hùng Vương, Q. Thủ Đức, TP HCM')
INSERT INTO GIAOVIEN (MaGV,HoTen,GioiTinh,NgaySinh,DiaChi) VALUES ('GV02',N'Nguyễn Lâm Trung',N'Nam','07/01/1978',N'234 3/2, TP Biên Hòa')
INSERT INTO GIAOVIEN (MaGV,HoTen,GioiTinh,NgaySinh,DiaChi) VALUES ('GV03',N'Hoàng Trung Hiếu',N'Nam','03/29/1986',N'22/11 Lý Thường Kiệt, Q.1, TP HCM')
INSERT INTO GIAOVIEN (MaGV,HoTen,GioiTinh,NgaySinh,DiaChi) VALUES ('GV04',N'Trần Hoàng Nhật Nam',N'Nam','05/05/1972',N'234 Trấn Não, Q.2, TP HCM')
INSERT INTO GIAOVIEN (MaGV,HoTen,GioiTinh,NgaySinh,DiaChi) VALUES ('GV05',N'Phạm Thị Thanh Bình',N'Nữ','01/19/1985',N'22 Hùng Vương, Q.5, TP HCM')

INSERT INTO HOCSINH (MaHs,HoTen,GioiTinh,NgaySinh,DiaChi,MaLop) VALUES ('1412558',N'Phạm Quốc Toàn','Nam','07/04/1996',N'DC_1',NULL)
INSERT INTO HOCSINH (MaHs,HoTen,GioiTinh,NgaySinh,DiaChi,MaLop) VALUES ('1512010',N'Nguyễn Bình An','Nam','07/05/1996',N'DC_2',NULL)
INSERT INTO HOCSINH (MaHs,HoTen,GioiTinh,NgaySinh,DiaChi,MaLop) VALUES ('1512219',N'Phạm Minh Hùng','Nam','07/06/1996',N'DC_3',NULL)
INSERT INTO HOCSINH (MaHs,HoTen,GioiTinh,NgaySinh,DiaChi,MaLop) VALUES ('1512334',N'Lê Văn Nam','Nam','07/07/1996',N'DC_4',NULL)
INSERT INTO HOCSINH (MaHs,HoTen,GioiTinh,NgaySinh,DiaChi,MaLop) VALUES ('1512430',N'Lê Văn Quang','Nam','07/08/1996',N'DC_5',NULL)


INSERT INTO LOPHOC (MaLop,TenLop,Nam,GVCN,LopTruong) VALUES ('LOP01','17CTT1','1996','GV01','1412558')
INSERT INTO LOPHOC (MaLop,TenLop,Nam,GVCN,LopTruong) VALUES ('LOP02','17CTT2','1996','GV02','1512010')
INSERT INTO LOPHOC (MaLop,TenLop,Nam,GVCN,LopTruong) VALUES ('LOP03','17CTT3','1996','GV03','1512219')
INSERT INTO LOPHOC (MaLop,TenLop,Nam,GVCN,LopTruong) VALUES ('LOP04','17CTT4','1996','GV04','1412558')
INSERT INTO LOPHOC (MaLop,TenLop,Nam,GVCN,LopTruong) VALUES ('LOP05','17CTT5','1996','GV05','1412558')


SELECT * FROM dbo.GIAOVIEN
SELECT * FROM dbo.LOPHOC
SELECT * FROM dbo.HOCSINH